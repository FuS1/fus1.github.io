
<!DOCTYPE html>
<html lang="zh_tw">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
    <meta HTTP-EQUIV="EXPIRES" CONTENT="0">
    <meta HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="180x180" href="./images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./images/favicon/favicon-16x16.png">
    <link rel="manifest" href="./images/favicon/site.webmanifest">
    <link rel="mask-icon" href="./images/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <title>輝耀 - 後台 </title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@500;700&display=swap" rel="stylesheet">

    <!-- Font-awesome -->
    <link href="lib/font-awesome-v6/css/all.min.css" type="text/css" rel="stylesheet">
    <!-- Tabulator -->
    <link href="lib/tabulator/tabulator.min.css" rel="stylesheet">
    <link href="lib/tabulator/tabulator_bootstrap4.min.css" rel="stylesheet">
    <link href="lib/tabulator/tabulator.custom.css" rel="stylesheet">
    <!-- flowbite-->
    <link href="lib/flowbite/flowbite.min.css" rel="stylesheet">
    <!-- select2-->
    <link href="lib/select2/select2.min.css" rel="stylesheet">
    <!-- Custom Theme Style -->
    <link href="lib/app.css" rel="stylesheet">

    <!-- jQuery -->
    <script src="lib/jquery/jquery.min.js"></script>
    <!-- TailWind -->
    <script src="lib/tailwind/tailwind.min.js"></script>
    <!-- Tabulator -->
    <script src="lib/tabulator/tabulator.min.js"></script>
    <script src="lib/tabulator/tabulator.custom.js?=<?php echo filemtime('lib/tabulator/tabulator.custom.js');?>"></script>
    <!-- sweetalert2 -->
    <script src="lib/sweetalert2/sweetalert2.min.js"></script>
    <!-- moment -->
    <script src="lib/moment/moment-with-locales.js"></script>
    <!-- underscore -->
    <script src="lib/underscore/underscore-umd-min.js"></script>
    <!-- flowbite-->
    <script src="lib/flowbite/flowbite.min.js"></script>
    <!-- select2-->
    <script src="lib/select2/select2.full.min.js"></script>
    <!-- Custom Script -->
    <script src="lib/app.js"></script>
    <script>

		$(function() {
            $('.btn-cancel').on('click',function(){
                location.assign('product-list.html');
            });

            $('#input-group-search').on('change',function(){
                // setAttributeItem($(this).val());
            });
            
            
            $(".add-attribute-btn").on('click',function(){
                addAttributeSelector()
            });

            initAttribute();
        });
        

        

        function initAttribute(attributes){
            if(!attributes){attributes=[{}];}
            
            exec('attribute/list','GET',{

            },function(data){
                console.log(data['attribute']);
                _dom_attrs = data['attribute'].map(function(attr){
                    return '<option value="'+attr['attributeId']+'">'+attr['name']+'</option>';
                }).join('');

                attributes.forEach(function(attribute) {
                    addAttributeSelector(attribute);
                }); 
            });
        }

        function addAttributeSelector(attribute){
            let _dom = $(  `<div class="flex my-1 attribute-item">
                                <div class="w-64 h-10">
                                    <select class="selector-with-filter" name="attribute[]">
                                        <option value="">　</option>
                                        `+_dom_attrs+`
                                    </select>
                                </div>
                                <div>
                                    <input type="input" class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="請輸入屬性內容">
                                </div>
                                <span class="btn hover:text-red-900 cursor-pointer level-remove ml-2 pt-2" title="刪除"><i class="fa-solid fa-trash-can"></i></span>
                            </div>`
                        );

            $('attributes').append(_dom)
            _dom.find('.fa-trash-can').on('click',function(){
                $(this).closest('.attribute-item').remove();
            });
            _dom.find('.selector-with-filter').select2({
                width: '100%',
                height: '200px',
                containerCssClass : "bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1.5 !h-full !bg-transparent",
                placeholder: "請選擇屬性",
                value:10
            }).on('select2:open', function () {
                let a = $(this).data('select2');

                let _dom_result = a.$results.parents('.select2-results');
                if(_dom_result.find('.create-new-attribute-button').length <= 0){
                    _dom_result.append('<div href="#" class="p-3 text-sm text-center font-medium text-yy-blue border-t border-gray-200 rounded-b-lg bg-gray-50 hover:bg-gray-100 cursor-pointer create-new-attribute-button"><i class="fa-solid fa-circle-plus"></i>　增加自訂屬性</div>')
                    .on('click', function (b) {
                        Swal.fire({
                            title: '請輸入新屬性名稱',
                            input: 'text',
                            inputAttributes: {
                                autocapitalize: 'off'
                            },
                            allowOutsideClick: false,
                            showCancelButton: true,
                            confirmButtonText: '儲存',
                            cancelButtonText: '取消',
                            showLoaderOnConfirm: true,
                            reverseButtons:true,
                            preConfirm: function(input) {
                                exec('attribute/new','POST',{
                                    name: input,
                                },function(data){
                                    $("attributes .selector-with-filter").append('<option value="'+data['attribute']['attributeId']+'">'+data['attribute']['name']+'</option>').trigger('change');
                                });
                            }
                        });
                    });
                }
            });

            if(attribute){
                _dom.find('.selector-with-filter').val(attribute['attributeId']).trigger('change');
            }
            
            
        }

    </script>
</head>

<body>
    
    <top-nav class="h-6 md:h-12"></top-nav>
	<section class="flex overflow-auto">
		<div class="w-fill md:w-1/6 md:min-w-[150px] md:max-w-[230px]">
            <side-menu class="w-fill md:w-1/6 md:min-w-[150px] md:max-w-[230px]"></side-menu>
		</div>
		<div class="w-full bg-gray-50">
            <div class="py-2.5 px-5 w-full text-right shadow-md mb-5">
                <button class="px-2 py-2.5 w-22 md:w-28 min-w-fit text-black font-medium rounded-lg text-sm no-underline bg-gray-200 hover:bg-gray-300 btn-cancel">取消</button>	
                <button class="px-2 py-2.5 w-22 md:w-28 min-w-fit ml-6 text-white font-medium rounded-lg text-sm no-underline bg-yy-green hover:bg-yy-green-900 btn-save">儲存</button>	
            </div>
            <div class="container mx-auto px-2 md:px-8">
                <form id="mainfood-form">
				    <div class="flex my-2 required-star ">
                        <label>
                            <span class="w-10 md:w-20 block mx-2 py-1 mb-2 w-fill text-base text-black">產品名稱</span>
                        </label>
                        
                        <div class="w-full">
                            <input type="input" class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="請輸入名稱" required>
                        </div>
                    </div>
                    <div class="flex my-2 required-star ">
                        <label>
                            <span class="w-10 md:w-20 block mx-2 py-1 mb-2 w-fill text-base text-black">品牌階層</span>
                        </label>
                        
                        <div class="w-full grid grid-cols-1 gap-2 md:grid-cols-3">
                            <select class="js-example-basic-multiple" name="states[]">
                                <option value="AL">尺寸</option>
                                <option value="WY">顏色</option>
                                <option value="AL">規格</option>
                                <option value="WY">種類</option>
                                <option value="AL">孔徑</option>
                                <option value="WY">螺旋數</option>
                                <option value="AL">通量</option>
                                <option value="WY">流明</option>
                                <option value="AL">馬力</option>
                                <option value="WY">安培</option>
                                <option value="WY">伏特</option>
                            </select>
                            <select class="js-example-basic-multiple" name="states[]">
                                <option value="AL">Alabama</option>
                                <option value="WY">Wyoming</option>
                            </select>
                            <select class="js-example-basic-multiple" name="states[]">
                                <option value="AL">Alabama</option>
                                <option value="WY">Wyoming</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex my-2">
                        <label>
                            <span class="w-10 md:w-20 block mx-2 py-1 mb-2 w-fill text-base text-black">內容描述</span>
                        </label>
                        
                        <div class="w-full">
                            <textarea class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" rows="4" ></textarea>
                        </div>
                    </div>
                    <div class="flex my-2">
                        <label>
                            <span class="w-10 md:w-20 block mx-2 py-1 mb-2 w-fill text-base text-black">熱門度</span>
                        </label>
                        
                        <div class="w-full">
                            <input type="number" min="0" max="1000" class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" value="0">
                        </div>
                    </div>
                    <div class="flex my-2">
                        <label>
                            <span class="w-10 md:w-20 block mx-2 py-1 mb-2 w-fill text-base text-black">狀態</span>
                        </label>
                        
                        <div class="w-full">
                            <select id="is_active" name="is_active" class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" value="1">
                                <option value="1">啟用</option>
                                <option value="0">停用</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex my-2">
                        <label>
                            <span class="w-10 md:w-20 block mx-2 py-1 mb-2 w-fill text-base text-black">搜尋關鍵字</span>
                        </label>
                        
                        <div class="w-full">
                            <input type="input" class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" >
                            <p class="mt-1 text-xs text-input-hint">請使用半形符號「 , 」做為分隔，（如：伺服器,馬達）</p>
                        </div>
                    </div>
                </form>
                <hr class="my-6">
                <section>
                    <div class="py-2 mb-2 required-star">「型錄」上傳（請依據順序上傳）</div>
                
                    <table class="items-center bg-transparent w-full border-collapse min-w-[375px]">
                        <thead class="bg-yy-blue text-white">
                            <tr>
                                <th class="px-2 align-middle border border-solid border-blueGray-100 py-1 border-l-0 border-r-0 text-center">指定封面</th>
                                <th class="px-2 align-middle border border-solid border-blueGray-100 py-1 border-l-0 border-r-0 text-left">語系</th>
                                <th class="px-2 align-middle border border-solid border-blueGray-100 py-1 border-l-0 border-r-0 text-left">檔名</th>
                                <th class="px-2 align-middle border border-solid border-blueGray-100 py-1 border-l-0 border-r-0 text-center"></th>
                            </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td class="border-t-0 px-2 py-1 align-middle border-l-0 border-r-0 text-center text-blueGray-700 ">
                                <input type="radio" id="doc-1" name="cover" value="1" checked>
                                <label for="doc-1">1</label><br>
                            </td>
                            <td class="border-t-0 px-2 py-1 align-middle border-l-0 border-r-0">
                                <select name="language" class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                                    <option value="繁體中文" selected>繁體中文</option>
                                    <option value="簡體中文">簡體中文</option>
                                    <option value="英文">英文</option>
                                    <option value="日文">日文</option>
                                </select>
                            </td>
                            <td class="border-t-0 px-2 py-1 align-center border-l-0 border-r-0 whitespace-nowrap">
                                <div class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-md hover:border-blue-500 hover:text-blue-500 block w-full p-2.5">
                                    <a href="https://supr.link/9Q4Dc" target="_blank">2023-06-24 繁中.pdf</a>
                                </div>
                            </td>
                            <td class="border-t-0 px-2 py-1 align-middle border-l-0 border-r-0 whitespace-nowrap">
                                <span class="btn hover:text-yy-green cursor-pointer level-rename" title="更名"><i class="fa-solid fa-pen"></i></span>
                                <span class="btn hover:text-red-900 cursor-pointer level-remove ml-2" title="刪除"><i class="fa-solid fa-trash-can"></i></span>
                            </td>
                          </tr>
                          <tr>
                            <td class="border-t-0 px-2 py-1 align-middle border-l-0 border-r-0 text-center text-blueGray-700 ">
                                <input type="radio" id="doc-2" name="cover" value="2">
                                <label for="doc-2">2</label><br>
                            </td>
                            <td class="border-t-0 px-2 py-1 align-middle border-l-0 border-r-0">
                                <select name="language" class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                                    <option value="繁體中文">繁體中文</option>
                                    <option value="簡體中文">簡體中文</option>
                                    <option value="英文" selected>英文</option>
                                    <option value="日文">日文</option>
                                </select>
                            </td>
                            <td class="border-t-0 px-2 py-1 align-center border-l-0 border-r-0 whitespace-nowrap">
                                <div class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-md hover:border-blue-500 hover:text-blue-500 block w-full p-2.5">
                                    <a href="https://supr.link/9Q4Dc" target="_blank">2023-06-24 英文.pdf</a>
                                </div>
                            </td>
                            <td class="border-t-0 px-2 py-1 align-middle border-l-0 border-r-0 whitespace-nowrap">
                                <span class="btn hover:text-yy-green cursor-pointer level-rename" title="更名"><i class="fa-solid fa-pen"></i></span>
                                <span class="btn hover:text-red-900 cursor-pointer level-remove ml-2" title="刪除"><i class="fa-solid fa-trash-can"></i></span>
                            </td>
                          </tr>
                        </tbody>
                    </table>
                    <div class="text-center mt-2">
                        <button class="px-2 py-2.5 w-22 md:w-28 min-w-fit ml-6 text-white font-medium rounded-lg text-sm no-underline bg-yy-green hover:bg-yy-green-900"><i class="fa-solid fa-circle-plus"></i> 增加檔案</button>	
                    </div>
                </section>
                <hr class="my-6">
                <section>
                    <div class="py-2 mb-2">「規格書」上傳（請依據順序上傳）</div>
                
                    <table class="items-center bg-transparent w-full border-collapse min-w-[375px]">
                        <thead class="bg-yy-blue text-white">
                            <tr>
                                <th class="px-2 align-middle border border-solid border-blueGray-100 py-1 border-l-0 border-r-0 text-center">指定封面</th>
                                <th class="px-2 align-middle border border-solid border-blueGray-100 py-1 border-l-0 border-r-0 text-left">語系</th>
                                <th class="px-2 align-middle border border-solid border-blueGray-100 py-1 border-l-0 border-r-0 text-left">檔名</th>
                                <th class="px-2 align-middle border border-solid border-blueGray-100 py-1 border-l-0 border-r-0 text-center"></th>
                            </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td class="border-t-0 px-2 py-1 align-middle border-l-0 border-r-0 text-center text-blueGray-700 ">
                                <input type="radio" id="doc-2-1" name="cover-2" value="1" checked>
                                <label for="doc-2-1">1</label><br>
                            </td>
                            <td class="border-t-0 px-2 py-1 align-middle border-l-0 border-r-0">
                                <select name="language" class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                                    <option value="繁體中文" selected>繁體中文</option>
                                    <option value="簡體中文">簡體中文</option>
                                    <option value="英文">英文</option>
                                    <option value="日文">日文</option>
                                </select>
                            </td>
                            <td class="border-t-0 px-2 py-1 align-center border-l-0 border-r-0 whitespace-nowrap">
                                <div class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-md hover:border-blue-500 hover:text-blue-500 block w-full p-2.5">
                                    <a href="https://supr.link/9Q4Dc" target="_blank">2023-06-24 繁中.pdf</a>
                                </div>
                            </td>
                            <td class="border-t-0 px-2 py-1 align-middle border-l-0 border-r-0 whitespace-nowrap">
                                <span class="btn hover:text-yy-green cursor-pointer level-rename" title="更名"><i class="fa-solid fa-pen"></i></span>
                                <span class="btn hover:text-red-900 cursor-pointer level-remove ml-2" title="刪除"><i class="fa-solid fa-trash-can"></i></span>
                            </td>
                          </tr>
                          <tr>
                            <td class="border-t-0 px-2 py-1 align-middle border-l-0 border-r-0 text-center text-blueGray-700 ">
                                <input type="radio" id="doc-2-2" name="cover-2" value="2">
                                <label for="doc-2-2">2</label><br>
                            </td>
                            <td class="border-t-0 px-2 py-1 align-middle border-l-0 border-r-0">
                                <select name="language" class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                                    <option value="繁體中文">繁體中文</option>
                                    <option value="簡體中文">簡體中文</option>
                                    <option value="英文" selected>英文</option>
                                    <option value="日文">日文</option>
                                </select>
                            </td>
                            <td class="border-t-0 px-2 py-1 align-center border-l-0 border-r-0 whitespace-nowrap">
                                <div class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-md hover:border-blue-500 hover:text-blue-500 block w-full p-2.5">
                                    <a href="https://supr.link/9Q4Dc" target="_blank">2023-06-24 英文.pdf</a>
                                </div>
                            </td>
                            <td class="border-t-0 px-2 py-1 align-middle border-l-0 border-r-0 whitespace-nowrap">
                                <span class="btn hover:text-yy-green cursor-pointer level-rename" title="更名"><i class="fa-solid fa-pen"></i></span>
                                <span class="btn hover:text-red-900 cursor-pointer level-remove ml-2" title="刪除"><i class="fa-solid fa-trash-can"></i></span>
                            </td>
                          </tr>
                        </tbody>
                    </table>
                    <div class="text-center mt-2">
                        <button class="px-2 py-2.5 w-22 md:w-28 min-w-fit ml-6 text-white font-medium rounded-lg text-sm no-underline bg-yy-green hover:bg-yy-green-900"><i class="fa-solid fa-circle-plus"></i> 增加檔案</button>	
                    </div>
                </section>
                <hr class="my-6">
                <section>
                    <div class="py-2 mb-2">「操作手冊」上傳（請依據順序上傳）</div>
                    <table class="items-center bg-transparent w-full border-collapse min-w-[375px]">
                        <thead class="bg-yy-blue text-white">
                            <tr>
                                <th class="px-2 align-middle border border-solid border-blueGray-100 py-1 border-l-0 border-r-0 text-center">指定封面</th>
                                <th class="px-2 align-middle border border-solid border-blueGray-100 py-1 border-l-0 border-r-0 text-left">語系</th>
                                <th class="px-2 align-middle border border-solid border-blueGray-100 py-1 border-l-0 border-r-0 text-left">檔名</th>
                                <th class="px-2 align-middle border border-solid border-blueGray-100 py-1 border-l-0 border-r-0 text-center"></th>
                            </tr>
                        </thead>
                        <tbody>
                          
                        </tbody>
                    </table>
                    <div class="text-center mt-2">
                        <button class="px-2 py-2.5 w-22 md:w-28 min-w-fit ml-6 text-white font-medium rounded-lg text-sm no-underline bg-yy-green hover:bg-yy-green-900"><i class="fa-solid fa-circle-plus"></i> 增加檔案</button>	
                    </div>
                </section>
                <hr class="my-6">
                <section>
                    <div class="py-2 mb-2">自訂屬性</div>
                        <attributes>
                            <!-- <div class="flex">
                                <div class="w-64">
                                    <select class="js-example-basic-multiple" name="states[]">
                                        <option value="AL">尺寸</option>
                                        <option value="WY">顏色</option>
                                        <option value="AL">規格</option>
                                        <option value="WY">種類</option>
                                        <option value="AL">孔徑</option>
                                        <option value="WY">螺旋數</option>
                                        <option value="AL">通量</option>
                                        <option value="WY">流明</option>
                                        <option value="AL">馬力</option>
                                        <option value="WY">安培</option>
                                        <option value="WY">伏特</option>
                                    </select>
                                </div>
                                <div>
                                    <input type="input" class="bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="請輸入屬性內容">
                                </div>
                            </div> -->
                        </attributes>
                    
                    <div class="text-center mt-2">
                        <button class="px-2 py-2.5 w-22 md:w-28 min-w-fit ml-6 text-white font-medium rounded-lg text-sm no-underline bg-yy-green hover:bg-yy-green-900 add-attribute-btn"><i class="fa-solid fa-circle-plus"></i> 增加屬性</button>	
                    </div>
                </section>
                <hr class="my-6">

            </div>
		</div>
	</section>
<body>
</html>






